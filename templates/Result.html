<!DOCTYPE html>
<html lang="en" id="result">
<head>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <title>Result</title>
</head>
<body>
视频长度(单位：秒)：{{video_infor}}

<div id="div">
    <meta charset="UTF-8">
    <form action = "/Result" method="post" id="bar">
        <input type="hidden"  name="formid" value="bar" >
        <input type="button"  value="注视点数量柱状图" onclick="this.form.submit()">
    </form>
    <form action = "/Result" method="post" id="pie">
        <input type="hidden"  name="formid" value="pie" >
        <input type="button"  name="注视点数量扇形图" value="注视点数量扇形图" onclick="this.form.submit()">
    </form>
    </div>
<table id="tb">
    <tr>
        <td>注视点编号</td>
        <td>注视点所处视频时间</td>
        <td>注视点x轴坐标</td>
        <td>注视点y轴坐标</td>
        <td>注视点种类颜色编号</td>
        <td>注视点种类</td>
    </tr>
</table>
<div id="demo" class="carousel slide" data-ride="carousel">

  <!-- 指示符 -->
  <ul class="carousel-indicators">
    <li data-target="#demo" data-slide-to="0" class="active"></li>
    <li data-target="#demo" data-slide-to="1"></li>
    <li data-target="#demo" data-slide-to="2"></li>
  </ul>

  <!-- 轮播图片 -->
  <div class="carousel-inner" id = spin>
  </div>

  <!-- 左右切换按钮 -->
  <a class="carousel-control-prev" href="#demo" data-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </a>
  <a class="carousel-control-next" href="#demo" data-slide="next">
    <span class="carousel-control-next-icon"></span>
  </a>

</div>

<script type="text/javascript">
    onload = function f() {

        //实现注视点表格
        var point_infor = '{{point_infor|tojson}}';
        point_infor = point_infor.substring(1, point_infor.length - 1);
        var point_data = JSON.parse(point_infor);
        var tb = document.getElementById("tb");
        for (var i = 0; i < point_data.length; i++) {
            var row = tb.insertRow(i + 1);
            var point_single = point_data[i];
            for (var j = 0; j < 6; j++) {
                var c1 = row.insertCell(j);
                c1.innerHTML = point_single[j];
            }
        }
        console.log("img");
        var pict_num = '{{pict_num}}';
        console.log(pict_num);
        var div_dict = {};
        var img_dict = {};
        //为轮播动态生成图片
        for(var k = 0; k < pict_num; k++){

            div_dict[k] = document.createElement("div");
            if(k === 0){
                div_dict[k].className = 'carousel-item active';
            }
            else{
                div_dict[k].className = 'carousel-item';
            }
            div_dict[k].id = 'spanitem' + k;
            var dom = document.getElementById("spin");
            dom.appendChild(div_dict[k]);
            img_dict[k] = document.createElement("img");
            img_dict[k].src = "/static/result_images" + k + ".png";
            console.log(k);
            img_dict[k].height = 300;
            img_dict[k].width = 900;
            div_dict[k].appendChild(img_dict[k]);
            console.log(div_dict[k]);
        }

    }
</script>
</body>
</html>
